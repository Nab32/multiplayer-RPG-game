<header class="justify-center items-center text-center">
    <h1 class="text-2xl text-gray-200 mb-2">Game of Stones</h1>
    <div class="flex justify-center items-center">
        <div class="flex space-x-4">
            <button class="btn btn-primary flex items-center space-x-2" routerLink="/edit">
                <fa-icon [icon]="faPlus"></fa-icon>
                <span>Creer une nouvelle carte de jeu</span>
            </button>
            <button class="btn btn-primary flex items-center space-x-2">
                <fa-icon [icon]="faFileImport"></fa-icon>
                <span>Importer une carte de jeu</span>
            </button>
            <button routerLink="/init" class="btn btn-primary flex items-center space-x-2">
                <fa-icon [icon]="faBackward"></fa-icon>
                <span>Retour</span>
            </button>
        </div>
    </div>
</header>

<div id="main-container" class="flex space-x-6 p-6">
    <div
        id="table-container"
        class="overflow-x-auto flex-2 bg-gray-800 rounded-lg p-4 shadow-lg scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-900"
    >
        <table class="table w-full text-gray-200">
            <thead>
                <tr class="bg-gray-700">
                    <th></th>
                    <th>Nom</th>
                    <th>Taille</th>
                    <th>Mode</th>
                    <th>Date de derniere modification</th>
                    <th>Actions</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let map of maps" class="bg-gray-900">
                    <th>
                        <label>
                            <input type="radio" name="radio-10" class="radio checked:bg-red-500" (click)="selectMap(map)" />
                        </label>
                    </th>
                    <td>{{ map.name }}</td>
                    <td>{{ map.sizeRow }}</td>
                    <td>{{ map.mode }}</td>
                    <td>{{ map.dateOfLastModification }}</td>
                    <td>
                        <div id="map-options-button-container" class="flex space-x-4 justify-center">
                            <button class="btn btn-square btn-outline text-xs h-8 w-8" (click)="delete(map)">
                                <fa-icon [icon]="faDelete"></fa-icon>
                            </button>
                            <button class="btn btn-square btn-outline text-xs h-8 w-8">
                                <fa-icon [icon]="faExport"></fa-icon>
                            </button>
                            <button class="btn btn-square btn-outline text-xs h-8 w-8" (click)="goToEditMap(map)">
                                <fa-icon [icon]="faEdit"></fa-icon>
                            </button>
                        </div>
                    </td>
                    <th>
                        <button class="btn btn-ghost btn-xs text-gray-400" (click)="toggleVisibility(map)">
                            {{ map.isVisible ? 'Hide' : 'Unhide' }}
                        </button>
                    </th>
                </tr>
            </tbody>
        </table>
    </div>

    <div id="mapPreviewContainer" class="flex-1 text-center" (mouseenter)="showDescription = true" (mouseleave)="showDescription = false">
        <img src="../../../assets/Map_Sample.png" alt="MapSample" class="max-w-full h-auto border border-gray-700 rounded-lg" />
    </div>

    <div id="mapDescriptionContainer" class="flex-1 text-left p-6">
        <ng-container *ngIf="showDescription && selectedMap; else noMapSelected">
            <h1 class="text-xl text-gray-200">Description de la carte de jeu</h1>
            <p class="text-gray-400">{{ selectedMap.mapDescription }}</p>
        </ng-container>
        <ng-template #noMapSelected>
            <h1 class="text-xl text-gray-200">Aucune carte sélectionnée</h1>
            <p class="text-gray-400">Veuillez sélectionner une carte pour voir sa description.</p>
        </ng-template>
    </div>
</div>

<div id="alert-container" class="fixed bottom-0 left-0 w-full p-4 z-50">
    <div
        *ngIf="alertMessage"
        role="alert"
        [ngClass]="{
            'alert alert-success': alertType === 'success',
            'alert alert-error': alertType === 'error',
            'opacity-100 transition-opacity duration-500': true,
            'opacity-0': alertMessage === ''
        }"
    >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24">
            <path
                *ngIf="alertType === 'success'"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
            />
            <path
                *ngIf="alertType === 'error'"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"
            />
        </svg>
        <span>{{ alertMessage }}</span>
    </div>
</div>
